{"ast":null,"code":"import _classCallCheck from\"/home/alon/dev/Alon-Hasson-31-05-2020/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/alon/dev/Alon-Hasson-31-05-2020/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import AppDispatcher from'../dispatcher/AppDispatcher';import $ from'jquery';var MessageActions=/*#__PURE__*/function(){function MessageActions(){_classCallCheck(this,MessageActions);}_createClass(MessageActions,[{key:\"sendMessage\",value:function sendMessage(sender,receiver,subject,content){$.ajax({type:\"POST\",dataType:\"json\",url:\"/send\",data:{\"sender\":sender,\"receiver\":receiver,\"subject\":subject,\"content\":content},success:function success(response){if(response===\"done\"){AppDispatcher.dispatch({type:\"MESSAGE_SENT\"});AppDispatcher.dispatch({type:\"NOTIFICATION\",variant:\"success\",content:\"Message Sent!\"});}else AppDispatcher.dispatch({type:\"danger\",value:\"Error: \"+response.responseText});},error:function error(jqXHR,textStatus,errorThrown){alert(\"Error, status = \"+textStatus+\", \"+\"error thrown: \"+errorThrown);}});}},{key:\"removeMessage\",value:function removeMessage(id){$.ajax({type:\"POST\",dataType:\"json\",url:\"/delete\",data:{\"message_id\":id},success:function success(response){if(response===\"done\"){AppDispatcher.dispatch({type:\"MESSAGE_DELETED\"});AppDispatcher.dispatch({type:\"NOTIFICATION\",variant:\"success\",content:\"Message deleted!\"});}else AppDispatcher.dispatch({type:\"NOTIFICATION\",variant:\"danger\",content:\"Error: \"+response});},error:function error(jqXHR,textStatus,errorThrown){alert(\"Error, status = \"+textStatus+\", \"+\"error thrown: \"+errorThrown);}});}},{key:\"loadData\",value:function loadData(user_id){$.ajax({type:\"POST\",dataType:\"json\",url:\"/messages\",data:{user_id:user_id},success:function success(response){AppDispatcher.dispatch({type:\"MESSAGES_FETCHED\",messages:response});},error:function error(jqXHR,textStatus,errorThrown){alert(\"Error, status = \"+textStatus+\", \"+\"error thrown: \"+errorThrown);}});}}]);return MessageActions;}();export default new MessageActions();","map":{"version":3,"sources":["/home/alon/dev/Alon-Hasson-31-05-2020/frontend/src/js/actions/MessageActions.js"],"names":["AppDispatcher","$","MessageActions","sender","receiver","subject","content","ajax","type","dataType","url","data","success","response","dispatch","variant","value","responseText","error","jqXHR","textStatus","errorThrown","alert","id","user_id","messages"],"mappings":"wUAAA,MAAOA,CAAAA,aAAP,KAA0B,6BAA1B,CAEA,MAAOC,CAAAA,CAAP,KAAc,QAAd,C,GAEMC,CAAAA,c,oKAEOC,M,CAAQC,Q,CAAUC,O,CAASC,O,CAAS,CAC/CL,CAAC,CAACM,IAAF,CAAO,CACNC,IAAI,CAAK,MADH,CAENC,QAAQ,CAAE,MAFJ,CAGNC,GAAG,CAAM,OAHH,CAINC,IAAI,CAAK,CAAE,SAAUR,MAAZ,CAAoB,WAAaC,QAAjC,CAA2C,UAAWC,OAAtD,CAA+D,UAAWC,OAA1E,CAJH,CAKNM,OAAO,CAAE,iBAASC,QAAT,CAAmB,CACxB,GAAIA,QAAQ,GAAK,MAAjB,CACA,CACIb,aAAa,CAACc,QAAd,CAAuB,CAACN,IAAI,CAAE,cAAP,CAAvB,EACHR,aAAa,CAACc,QAAd,CAAuB,CAACN,IAAI,CAAC,cAAN,CAAsBO,OAAO,CAAE,SAA/B,CAA0CT,OAAO,CAAE,eAAnD,CAAvB,EACA,CAJD,IAOIN,CAAAA,aAAa,CAACc,QAAd,CAAuB,CAAEN,IAAI,CAAE,QAAR,CAAkBQ,KAAK,CAAE,UAAYH,QAAQ,CAACI,YAA9C,CAAvB,EACD,CAdD,CAeNC,KAAK,CAAE,eAASC,KAAT,CAAgBC,UAAhB,CAA4BC,WAA5B,CAAyC,CAC5CC,KAAK,CAAC,mBAAqBF,UAArB,CAAkC,IAAlC,CACL,gBADK,CACcC,WADf,CAAL,CAGH,CAnBK,CAAP,EAqBA,C,oDAEgBE,E,CACd,CACFtB,CAAC,CAACM,IAAF,CAAO,CACNC,IAAI,CAAK,MADH,CAENC,QAAQ,CAAE,MAFJ,CAGNC,GAAG,CAAM,SAHH,CAINC,IAAI,CAAK,CAAC,aAAcY,EAAf,CAJH,CAKNX,OAAO,CAAE,iBAASC,QAAT,CAAmB,CACxB,GAAIA,QAAQ,GAAK,MAAjB,CAAyB,CACrBb,aAAa,CAACc,QAAd,CAAuB,CAACN,IAAI,CAAE,iBAAP,CAAvB,EACAR,aAAa,CAACc,QAAd,CAAuB,CAACN,IAAI,CAAC,cAAN,CAAsBO,OAAO,CAAE,SAA/B,CAA0CT,OAAO,CAAE,kBAAnD,CAAvB,EACA,CAHJ,IAKIN,CAAAA,aAAa,CAACc,QAAd,CAAuB,CAACN,IAAI,CAAC,cAAN,CAAsBO,OAAO,CAAE,QAA/B,CAAyCT,OAAO,CAAE,UAAYO,QAA9D,CAAvB,EACJ,CAZE,CAaNK,KAAK,CAAE,eAASC,KAAT,CAAgBC,UAAhB,CAA4BC,WAA5B,CAAyC,CAC5CC,KAAK,CAAC,mBAAqBF,UAArB,CAAkC,IAAlC,CACL,gBADK,CACcC,WADf,CAAL,CAGH,CAjBK,CAAP,EAoBG,C,0CAEQG,O,CAAS,CACpBvB,CAAC,CAACM,IAAF,CAAO,CACNC,IAAI,CAAE,MADA,CAENC,QAAQ,CAAE,MAFJ,CAGNC,GAAG,CAAE,WAHC,CAINC,IAAI,CAAE,CAACa,OAAO,CAACA,OAAT,CAJA,CAKNZ,OAAO,CAAE,iBAASC,QAAT,CAAmB,CAC3Bb,aAAa,CAACc,QAAd,CAAuB,CAAEN,IAAI,CAAE,kBAAR,CAA4BiB,QAAQ,CAAEZ,QAAtC,CAAvB,EACA,CAPK,CAQNK,KAAK,CAAE,eAASC,KAAT,CAAgBC,UAAhB,CAA4BC,WAA5B,CAAyC,CAC5CC,KAAK,CAAC,mBAAqBF,UAArB,CAAkC,IAAlC,CACL,gBADK,CACcC,WADf,CAAL,CAGH,CAZK,CAAP,EAcA,C,8BAKF,cAAe,IAAInB,CAAAA,cAAJ,EAAf","sourcesContent":["import AppDispatcher from '../dispatcher/AppDispatcher';\n\nimport $ from 'jquery';\n\nclass MessageActions {\n\n\tsendMessage(sender, receiver, subject, content) {\n\t\t$.ajax({\n\t\t\ttype:    \"POST\",\n\t\t\tdataType: \"json\",\n\t\t\turl:     \"/send\",\n\t\t\tdata:    { \"sender\": sender, \"receiver\" : receiver, \"subject\": subject, \"content\": content},\n\t\t\tsuccess: function(response) {\n\t\t    \tif (response === \"done\")\n\t\t    \t{\n\t\t        \tAppDispatcher.dispatch({type: \"MESSAGE_SENT\"});\n\t\t    \t\tAppDispatcher.dispatch({type:\"NOTIFICATION\", variant: \"success\", content: \"Message Sent!\"});\n\t\t    \t}\n\n\t\t        else\n\t\t        \tAppDispatcher.dispatch({ type: \"danger\", value: \"Error: \" + response.responseText });\n\t\t       },\n\t\t\terror: function(jqXHR, textStatus, errorThrown) {\n\t\t\t    alert(\"Error, status = \" + textStatus + \", \" +\n\t\t\t\t    \"error thrown: \" + errorThrown\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\t}\n\n    removeMessage(id)\n    {\n\t\t$.ajax({\n\t\t\ttype:    \"POST\",\n\t\t\tdataType: \"json\",\n\t\t\turl:     \"/delete\",\n\t\t\tdata:    {\"message_id\": id},\n\t\t\tsuccess: function(response) {\n\t\t    \tif (response === \"done\") {\n\t\t        \tAppDispatcher.dispatch({type: \"MESSAGE_DELETED\"});\n\t\t        \tAppDispatcher.dispatch({type:\"NOTIFICATION\", variant: \"success\", content: \"Message deleted!\"});\n\t\t        }\n\t\t        else\n\t\t        \tAppDispatcher.dispatch({type:\"NOTIFICATION\", variant: \"danger\", content: \"Error: \" + response});\n\t\t   \t},\n\t\t\terror: function(jqXHR, textStatus, errorThrown) {\n\t\t\t    alert(\"Error, status = \" + textStatus + \", \" +\n\t\t\t\t    \"error thrown: \" + errorThrown\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\n    }\n\n    loadData(user_id) {\n\t\t$.ajax({\n\t\t\ttype: \"POST\",\n\t\t\tdataType: \"json\",\n\t\t\turl: \"/messages\",\n\t\t\tdata: {user_id:user_id},\n\t\t\tsuccess: function(response) {\n\t\t\t\tAppDispatcher.dispatch({ type: \"MESSAGES_FETCHED\", messages: response });\n\t\t\t},\n\t\t\terror: function(jqXHR, textStatus, errorThrown) {\n\t\t\t    alert(\"Error, status = \" + textStatus + \", \" +\n\t\t\t\t    \"error thrown: \" + errorThrown\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\t}\n}\n\n  \n\nexport default new MessageActions()"]},"metadata":{},"sourceType":"module"}