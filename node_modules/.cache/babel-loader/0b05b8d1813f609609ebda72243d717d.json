{"ast":null,"code":"import _defineProperty from\"/home/alon/dev/Alon-Hasson-31-05-2020/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/home/alon/dev/Alon-Hasson-31-05-2020/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/alon/dev/Alon-Hasson-31-05-2020/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/alon/dev/Alon-Hasson-31-05-2020/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/alon/dev/Alon-Hasson-31-05-2020/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/alon/dev/Alon-Hasson-31-05-2020/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import MessageActions from'../actions/MessageActions';import MessageStore from'../stores/MessageStore';import{Modal,Button}from\"react-bootstrap\";var AddWindow=/*#__PURE__*/function(_React$Component){_inherits(AddWindow,_React$Component);var _super=_createSuper(AddWindow);function AddWindow(){var _this;_classCallCheck(this,AddWindow);_this=_super.call(this);_this.handleClose=function(){return _this.setState({show:false});};_this.handleShow=function(){return _this.setState({show:true});};_this.state={receiver:\"\",subject:\"\",content:\"\",show:false,error:\"\"};_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));_this.onSubmit=_this.onSubmit.bind(_assertThisInitialized(_this));_this.cleanForm=_this.cleanForm.bind(_assertThisInitialized(_this));return _this;}_createClass(AddWindow,[{key:\"onSubmit\",value:function onSubmit(e){e.preventDefault();if(this.state.receiver===\"\")this.setState({error:\"Receiver ID must not be empty\"});else if(this.state.subject===\"\")this.setState({error:\"Subject must not be empty\"});else if(this.state.content.length<5)this.setState({error:\"Message content must contain at least 5 chars\"});else MessageActions.sendMessage(this.props.sender,this.state.receiver,this.state.subject,this.state.content);}},{key:\"cleanForm\",value:function cleanForm(){this.handleClose();this.setState({receiver:\"\",subject:\"\",content:\"\",error:\"\"});}},{key:\"handleChange\",value:function handleChange(e){this.setState(_defineProperty({},e.target.id,e.target.value));}},{key:\"componentDidMount\",value:function componentDidMount(){MessageStore.addChangeListener(\"MESSAGE_SENT\",this.cleanForm);}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"fa fa-plus-circle fa-4x\",variant:\"primary\",onClick:this.handleShow}),/*#__PURE__*/React.createElement(Modal,{show:this.state.show,onHide:this.handleClose},/*#__PURE__*/React.createElement(Modal.Header,{closeButton:true},/*#__PURE__*/React.createElement(Modal.Title,null,\"New Message\")),/*#__PURE__*/React.createElement(Modal.Body,null,/*#__PURE__*/React.createElement(\"form\",null,/*#__PURE__*/React.createElement(\"input\",{type:\"text\",onChange:this.handleChange,maxlength:\"16\",id:\"receiver\",className:\"form-control mb-3\",placeholder:\"Receiver ID\",value:this.state.receiver}),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",onChange:this.handleChange,maxlength:\"30\",id:\"subject\",className:\"form-control mb-3\",placeholder:\"Subject\",value:this.state.subject}),/*#__PURE__*/React.createElement(\"textarea\",_defineProperty({className:\"form-control mb-3\",onChange:this.handleChange,id:\"content\",value:this.state.content,placeholder:\"Message content...\"},\"id\",\"content\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"float-left text-danger\"},this.state.error&&\"* \"+this.state.error)),/*#__PURE__*/React.createElement(Modal.Footer,null,/*#__PURE__*/React.createElement(Button,{variant:\"secondary\",onClick:this.handleClose},\"Close\"),/*#__PURE__*/React.createElement(Button,{variant:\"primary\",onClick:this.onSubmit},\"Send\"))));}}]);return AddWindow;}(React.Component);export default AddWindow;","map":{"version":3,"sources":["/home/alon/dev/Alon-Hasson-31-05-2020/frontend/src/js/components/AddWindow.js"],"names":["React","MessageActions","MessageStore","Modal","Button","AddWindow","handleClose","setState","show","handleShow","state","receiver","subject","content","error","handleChange","bind","onSubmit","cleanForm","e","preventDefault","length","sendMessage","props","sender","target","id","value","addChangeListener","Component"],"mappings":"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","sourcesContent":["import React from 'react'\nimport MessageActions from '../actions/MessageActions';\nimport MessageStore from '../stores/MessageStore'\nimport {Modal, Button} from \"react-bootstrap\"\n\nclass AddWindow extends React.Component {\n\n\tconstructor() {\n\t\tsuper();\n\t\tthis.handleClose = () => this.setState({show: false});\n\t\tthis.handleShow = () => this.setState({show: true});\n\t\tthis.state = {receiver:\"\", subject:\"\", content:\"\", show:false, error: \"\"};\n\t\tthis.handleChange = this.handleChange.bind(this);\n\t\tthis.onSubmit = this.onSubmit.bind(this);\n\t\tthis.cleanForm = this.cleanForm.bind(this);\n\t}\n\tonSubmit(e) {\n\t\te.preventDefault();\n\t\tif (this.state.receiver === \"\")\n\t\t\tthis.setState({error:\"Receiver ID must not be empty\"})\n\t\telse if (this.state.subject === \"\")\n\t\t\tthis.setState({error:\"Subject must not be empty\"})\n\t\telse if (this.state.content.length < 5)\n\t\t\tthis.setState({error:\"Message content must contain at least 5 chars\"})\n\t\telse\n\t\t\tMessageActions.sendMessage(this.props.sender, this.state.receiver, this.state.subject, this.state.content);\n\n\t}\n\tcleanForm() {\n\t\tthis.handleClose();\n\t\tthis.setState({receiver:\"\", subject:\"\", content:\"\", error:\"\"});\n\t}\n\thandleChange(e) {\n\t\tthis.setState({[e.target.id]: e.target.value})\n\t}\n\n    componentDidMount() {\n        MessageStore.addChangeListener(\"MESSAGE_SENT\", this.cleanForm);\n    }\n\n\trender() {\n\t\treturn <div>\n\t\t\t<div className=\"fa fa-plus-circle fa-4x\" variant=\"primary\" onClick={this.handleShow}></div>\n\t\t\t<Modal show={this.state.show} onHide={this.handleClose}>\n\t\t\t\t<Modal.Header closeButton>\n\t\t\t\t<Modal.Title>New Message</Modal.Title>\n\t\t\t\t</Modal.Header>\n\t\t\t\t<Modal.Body>\n\t\t\t\t\t<form>\n\t\t\t\t\t\t<input type=\"text\" onChange={this.handleChange} maxlength=\"16\" id=\"receiver\" className=\"form-control mb-3\" placeholder=\"Receiver ID\" value={this.state.receiver} />\n\t\t\t\t\t\t<input type=\"text\" onChange={this.handleChange} maxlength=\"30\" id=\"subject\" className=\"form-control mb-3\" placeholder=\"Subject\" value={this.state.subject} />\n\t\t\t\t\t\t<textarea className=\"form-control mb-3\"  onChange={this.handleChange} id=\"content\" value={this.state.content} placeholder=\"Message content...\" id=\"content\"></textarea>\n\t\t\t\t\t</form>\n\t\t\t\t\t<div className=\"float-left text-danger\">{this.state.error && \"* \" +this.state.error }</div>\n\n\t\t\t\t</Modal.Body>\n\t\t\t\t<Modal.Footer>\n\t\t\t\t\t<Button variant=\"secondary\" onClick={this.handleClose}>\n\t\t\t\t\t\tClose\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button variant=\"primary\" onClick={this.onSubmit}>\n\t\t\t\t\t\tSend\n\t\t\t\t\t</Button>\n\n\t\t\t\t</Modal.Footer>\n\t\t\t</Modal>\n\t\t</div>;\n\t}\n\n}\n\nexport default AddWindow;"]},"metadata":{},"sourceType":"module"}